# B. 雪菜的新家

### 题意理解：

INPUT：

第一行，节点的数目n。
第二行，n个整数，表示当前节点的父节点。

OUTPUT:

最少需要**打破**的节点数目

### 思路和解法：

我们的要求是最后**打开**（注意与**打破**区分）所有节点

一个节点被打开，只有两种情况：*要么被打破；要么其祖先被打破，自己利用钥匙被打开*

我们的思路就是要最大化利用打破祖先的链式效应。

那么一个直接的思路就是找到森林里面所有的树根，打破它，但是等等，这样会WA。

为什么呢？因为这可能不是森林，里面可能存在环。

然后就**莫名其妙**想到并查集了（x

然后问题就很简单了

具体（看代码，有注释x

对于每对父子关系，我们都把有关系的节点并在一个集合里面

最后只需要找出不同集合的数目即可

### 时间复杂度：

$O(n\log(n))$

并不是很懂（很是不懂x）并查集时间复杂度

网上的说法是使用按秩合并和路径压缩，并和查单次操作时间复杂度是$O(\alpha(n))$，其中$\alpha$

是反Ackerman函数，近似为常数。

但如果只使用其中一个，都是单次操作$O(\log(n))$。

故时间复杂度$O(n\log(n))$

### 空间复杂度：

$O(n)$