# E.  密室逃脱

### 思路和解法：

这题要求每一行，每一列上不能有两个被选择，但总共应该选择完n个，其实就是求一个每行和列数（1到n）的一个匹配，或者说指派，或者说排列，要求这个匹配的权值最大。

依据题解，使用KM算法。

KM算法以匈牙利算法为基础，是求解最大权完备匹配（一方匹配全）的算法，这里特殊化为完美匹配（双方匹配全）。

匈牙利算法是以寻找增广路径为核心的算法，增广路径是一种交错路径（毕竟是二部图嘛），增广路径保证节点数目增加。

KM算法有很多奇怪的概念，我还不是很懂，照板子写出来的。

其中有可行顶标，相等子图等概念。

可行顶标就是o每个点的一个值，相等子图是由相等边构成的子图，而相等边定义为可行顶标值之和等于边权的边。

我们按照左部顶点枚举，每一轮都通过改变可行顶标的方式扩大相等子图，从而从子图中找到增广路径，增加一对匹配。

可以证明（我不会），此时的匹配就是最大权完备匹配。

具体看代码，有注释

### 时间复杂度：

因为有个while循环，Xm分析不清楚

网上称加了slack优化delta计算时间后为$O(N^3)$，但是有人说加slack是伪$O(N^3)$，应该BFS才可以。

但至多是$O(N^4)$

### 空间复杂度：

$O(N^2)$