# B. 国际城市设计大赛

### 思路和解法：

首先用kruskal+union-find set完成最小生成树部分。

但题目要求次小生成树，emmmm，那么就枚举每条非树边，加入树中。

此时必然会生成一个环，为了让生成树次小，那么被断开的树边应该尽量大，工作就转化为求新环上的最大边。

如何求最大边？套路就是把环通过$a=LCA(u,v)$拆分为$(u,v).(a,u),(a,v)$三部分，利用树上倍增，就可以在单次$log(V)$的时间复杂度内进行查询。

最后一点，可能会出现，最大边与非树边相同的情况，这样需要维护一个严格次大边，发生这种情况时用次大边代替。

具体看代码，有注释

### 时间复杂度：

最小生成树部分：

kruskal+并查集 $O(ElogE)$

倍增部分：

考虑非树边数目上界为$E$，倍增算法二进制拆分时间单次时间复杂度$O(logV)$,故总时间复杂度$O(ElogV)$

故最终时间复杂度为$O(ElogE)$

### 空间复杂度：

$O(E)$

